{"version":3,"file":"component---src-pages-index-js-1f334c2e4e02a2e487e5.js","mappings":"sNAEO,SAASA,IACZ,OAAO,UAAoBC,GAC/B,C,uECDO,MAAMC,GAAQ,SAAuB,SAAqBC,EAAOC,GACpE,MAAMC,EAAQ,IAAI,QAAaF,EAAOC,EAAQE,kBAC9C,OAAO,OAAoBD,EAAOD,EACtC,IAAG,SAA2BG,EAASH,GAAS,SAAEI,GAAaC,IAC3D,IAAAC,YAAU,WACN,MAAM,SAAEC,GAAcJ,EACtB,SAASK,EAAYC,GACbA,EAAMR,QAAUM,IAChBA,EAASG,SACTL,GAAQ,GAEhB,CACA,SAASM,EAAaF,GACdA,EAAMR,QAAUM,GAChBF,GAAQ,EAEhB,CAeA,OAdAL,EAAQH,IAAIe,GAAG,CACXC,UAAWL,EACXM,WAAYH,IAEgB,MAA5BX,EAAQE,kBAEQ,MAAZE,GACAG,EAASQ,UAAUX,GAEvBG,EAASS,OAAOhB,EAAQH,MAGxBG,EAAQE,iBAAiBe,UAAUV,GAEhC,WACHP,EAAQH,IAAIqB,IAAI,CACZL,UAAWL,EACXM,WAAYH,IAEhBX,EAAQE,kBAAkBiB,cAC1BnB,EAAQH,IAAIuB,YAAYb,EAC5B,CACJ,GAAG,CACCJ,EACAH,EACAK,EACAD,GAER,I,wBCtCA,GAAsB,oBAAXiB,OAAwB,CACjBC,IAAAA,QAAU,CACxBC,KAAK,2zCAELC,UAAW,GACXC,SAAU,CAAC,GAAI,KAEnB,CAgEA,MA7DiB,WAEf,SAASC,IACP,MAAM,EAACtB,EAAS,EAACuB,IAAeC,EAAAA,EAAAA,UAAS,OACnC,EAACC,EAAK,EAACC,IAAWF,EAAAA,EAAAA,UAAS,IAE3B/B,EAAMD,IAaZ,OAXAU,EAAAA,EAAAA,YAAU,KACRT,EAAIkC,SAASnB,GAAG,iBAAiB,SAAUoB,GACzCL,EAAYK,EAAEC,QACdpC,EAAIqC,MAAMF,EAAEC,OAAQpC,EAAIsC,WACxB,MAAMC,EAASJ,EAAEK,SACFf,IAAAA,OAASU,EAAEC,OAAQG,GAC3BE,MAAMzC,GACbiC,EAAQE,EAAEO,OAAOC,eAAeC,MAAM,KACxC,GAAE,GACD,CAAC5C,IAEgB,OAAbO,EAAoB,KACzBsC,EAAAA,cAACC,EAAAA,EAAM,CAACvC,SAAUA,GAGtB,CAEA,OACEsC,EAAAA,cAACE,EAAAA,EAAY,CACXC,MAAO,CAAEC,OAAQ,SACjBC,OAAQ,CAAC,QAAS,QAClBC,KAAM,GACNC,iBAAiB,GAEjBP,EAAAA,cAAChB,EAAc,MACfgB,EAAAA,cAACQ,EAAAA,EAAS,CACRC,YAAY,+NACZC,IAAI,MACJC,IAAI,8EAEHC,EAAAA,KAAc,SAAUC,GACvB,OACEb,EAAAA,cAACC,EAAAA,EAAM,CACLa,GAAID,EAAKE,QACTC,cAAe,CACbC,MAAO,SAAUlD,IACfmD,EAAAA,EAAAA,UACE,+BAAiCnD,EAAMoD,OAAOC,QAAQN,GAE1D,GAEFO,IAAKR,EAAKE,QACVrD,SAAU,CAACmD,EAAKS,QAAQC,OAAQV,EAAKS,QAAQE,QAC7CC,KAAMC,SAEN1B,EAAAA,cAAC5C,EAAK,KAAEyD,EAAKc,MAGnB,IAGR,EC3EA,MAQaC,EAAOA,IAAM5B,EAAAA,cAAA,aAAO,kBAEjC,MAVkB6B,IAEZ7B,EAAAA,cAAC8B,EAAAA,EAAM,CAACC,UAAU,kBAChB/B,EAAAA,cAACgC,EAAQ,M","sources":["webpack://hopfenstop/./node_modules/react-leaflet/lib/hooks.js","webpack://hopfenstop/./node_modules/react-leaflet/lib/Popup.js","webpack://hopfenstop/./src/components/kiosk_map_overview.js","webpack://hopfenstop/./src/pages/index.js"],"sourcesContent":["import { useLeafletContext } from '@react-leaflet/core';\nimport { useEffect } from 'react';\nexport function useMap() {\n    return useLeafletContext().map;\n}\nexport function useMapEvent(type, handler) {\n    const map = useMap();\n    useEffect(function addMapEventHandler() {\n        // @ts-ignore event type\n        map.on(type, handler);\n        return function removeMapEventHandler() {\n            // @ts-ignore event type\n            map.off(type, handler);\n        };\n    }, [\n        map,\n        type,\n        handler\n    ]);\n    return map;\n}\nexport function useMapEvents(handlers) {\n    const map = useMap();\n    useEffect(function addMapEventHandlers() {\n        map.on(handlers);\n        return function removeMapEventHandlers() {\n            map.off(handlers);\n        };\n    }, [\n        map,\n        handlers\n    ]);\n    return map;\n}\n","import { createElementObject, createOverlayComponent } from '@react-leaflet/core';\nimport { Popup as LeafletPopup } from 'leaflet';\nimport { useEffect } from 'react';\nexport const Popup = createOverlayComponent(function createPopup(props, context) {\n    const popup = new LeafletPopup(props, context.overlayContainer);\n    return createElementObject(popup, context);\n}, function usePopupLifecycle(element, context, { position  }, setOpen) {\n    useEffect(function addPopup() {\n        const { instance  } = element;\n        function onPopupOpen(event) {\n            if (event.popup === instance) {\n                instance.update();\n                setOpen(true);\n            }\n        }\n        function onPopupClose(event) {\n            if (event.popup === instance) {\n                setOpen(false);\n            }\n        }\n        context.map.on({\n            popupopen: onPopupOpen,\n            popupclose: onPopupClose\n        });\n        if (context.overlayContainer == null) {\n            // Attach to a Map\n            if (position != null) {\n                instance.setLatLng(position);\n            }\n            instance.openOn(context.map);\n        } else {\n            // Attach to container component\n            context.overlayContainer.bindPopup(instance);\n        }\n        return function removePopup() {\n            context.map.off({\n                popupopen: onPopupOpen,\n                popupclose: onPopupClose\n            });\n            context.overlayContainer?.unbindPopup();\n            context.map.removeLayer(instance);\n        };\n    }, [\n        element,\n        context,\n        setOpen,\n        position\n    ]);\n});\n","import React from 'react';\nimport { Text, useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport { marker } from './map.module.css';\n\nimport kioskData from '../data/kiosk_data.json';\nimport L from 'leaflet';\nimport { navigate } from 'gatsby';\nimport { useMapEvents } from 'react-leaflet';\n\nif (typeof window !== 'undefined') {\n  const svgIcon = L.divIcon({\n    html: `\n    <svg width=\"34\" height=\"44\" viewBox=\"0 0 35 45\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M32.92 16.93l-3.525-3.525V8.419a1.983 1.983 0 00-1.983-1.982h-4.985L18.9 2.91a1.984 1.984 0 00-2.803 0l-3.524 3.526H7.588a1.983 1.983 0 00-1.982 1.982v4.986L2.081 16.93a1.982 1.982 0 000 2.803l3.525 3.526v4.984c0 1.096.888 1.983 1.982 1.983h4.986L17.457 45l4.97-14.773h4.985a1.983 1.983 0 001.983-1.983V23.26l3.525-3.526a1.982 1.982 0 000-2.803\" fill=\"#fcd33f\" /><g opacity=\".15\" transform=\"matrix(1.0667 0 0 -1.0667 -347.3 97.26)\"><path d=\"M342 89c-.476 0-.951-.181-1.314-.544l-3.305-3.305h-4.673a1.858 1.858 0 01-1.859-1.858v-4.674l-3.305-3.305a1.857 1.857 0 010-2.627l3.305-3.305v-4.674a1.86 1.86 0 011.859-1.859h4.673L341.959 49l4.659 13.849h4.674a1.86 1.86 0 011.859 1.859v4.674l3.305 3.305a1.858 1.858 0 010 2.627l-3.305 3.305v4.674a1.859 1.859 0 01-1.859 1.858h-4.674l-3.304 3.305A1.851 1.851 0 01342 89m0-1a.853.853 0 00.607-.251l3.304-3.305.293-.293h5.088a.86.86 0 00.859-.858v-5.088l3.598-3.598A.852.852 0 00356 74a.85.85 0 00-.251-.606l-3.598-3.598v-5.088a.86.86 0 00-.859-.859h-5.393l-.229-.681-3.702-11.006-3.637 11.001-.227.686h-5.396a.86.86 0 00-.859.859v5.088l-3.598 3.598c-.162.162-.251.377-.251.606s.089.445.251.607l3.598 3.598v5.088a.86.86 0 00.859.858h5.087l3.598 3.598A.853.853 0 00342 88\" fill=\"#231f20\" /></g></svg>`,\n    className: '',\n    iconSize: [34, 44],\n  });\n}\n\n\nconst KioskMap = function(){\n  \n  function LocationMarker() {\n    const [position, setPosition] = useState(null);\n    const [bbox, setBbox] = useState([]);\n\n    const map = useMap();\n\n    useEffect(() => {\n      map.locate().on(\"locationfound\", function (e) {\n        setPosition(e.latlng);\n        map.flyTo(e.latlng, map.getZoom());\n        const radius = e.accuracy;\n        const circle = L.circle(e.latlng, radius);\n        circle.addTo(map);\n        setBbox(e.bounds.toBBoxString().split(\",\"));\n      });\n    }, [map]);\n\n    return position === null ? null : (\n      <Marker position={position}>\n      </Marker>\n    );\n  }\n\n  return(\n    <MapContainer\n      style={{ height: '600px' }}\n      center={[50.1109, 8.6821]}\n      zoom={13}\n      scrollWheelZoom={true}\n    >\n      <LocationMarker />\n      <TileLayer\n        attribution='Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        ext='png'\n        url='https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}'\n      />\n        {kioskData.map(function (data) {\n          return (\n            <Marker\n              id={data.kioskId}\n              eventHandlers={{\n                click: function (event) {\n                  navigate(\n                    '/kiosk_detail_view?kiosk_id=' + event.target.options.id\n                  );\n                },\n              }}\n              key={data.kioskId}\n              position={[data.address.geolat, data.address.geolng]}\n              icon={svgIcon}\n            >\n              <Popup>{data.name}</Popup>\n            </Marker>\n          );\n        })}\n    </MapContainer>\n  );\n}\n\nexport default KioskMap;\n","import * as React from 'react'\nimport Layout from '../components/layout'\nimport KioskMap from '../components/kiosk_map_overview'\n\nconst IndexPage = () => {\n    return (\n      <Layout pageTitle=\"HopfenStop PWA\">\n        <KioskMap/>\n      </Layout>\n    )\n  }\n\nexport const Head = () => <title>HopfenStop PWA</title>\n\nexport default IndexPage"],"names":["useMap","map","Popup","props","context","popup","overlayContainer","element","position","setOpen","useEffect","instance","onPopupOpen","event","update","onPopupClose","on","popupopen","popupclose","setLatLng","openOn","bindPopup","off","unbindPopup","removeLayer","window","L","html","className","iconSize","LocationMarker","setPosition","useState","bbox","setBbox","locate","e","latlng","flyTo","getZoom","radius","accuracy","addTo","bounds","toBBoxString","split","React","Marker","MapContainer","style","height","center","zoom","scrollWheelZoom","TileLayer","attribution","ext","url","kioskData","data","id","kioskId","eventHandlers","click","navigate","target","options","key","address","geolat","geolng","icon","svgIcon","name","Head","IndexPage","Layout","pageTitle","KioskMap"],"sourceRoot":""}