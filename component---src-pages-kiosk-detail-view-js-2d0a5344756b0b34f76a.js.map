{"version":3,"file":"component---src-pages-kiosk-detail-view-js-2d0a5344756b0b34f76a.js","mappings":"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","sources":["webpack://hopfenstop/./src/components/kiosk_detail_view/kiosk_map_header.js","webpack://hopfenstop/./src/helper/date_time.js","webpack://hopfenstop/./src/styles.js","webpack://hopfenstop/./src/components/kiosk_detail_view/kiosk_times.js","webpack://hopfenstop/./src/pages/kiosk_detail_view.js"],"sourcesContent":["import React from \"react\"\nimport { MapContainer, TileLayer, Marker } from \"react-leaflet\"\n\nconst KioskHeaderMap = ({lat, long}) => (\n  <MapContainer style={{ height: '300px' }} center={[lat, long]} zoom={16} scrollWheelZoom={false}>\n  <TileLayer\n    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n  />\n    <Marker \n        position={[lat, long]}\n    >\n    </Marker>\n</MapContainer>\n)\n\nexport default KioskHeaderMap","import moment from \"moment\";\n\nDate.prototype.addHours = function (h) {\n    this.setTime(this.getTime() + (h * 60 * 60 * 1000));\n    return this;\n}\n\nexport function formatDate(date) {\n    var monthNames = [\n        'Januar',\n        'Februar',\n        'März',\n        'April',\n        'Mai',\n        'Juni',\n        'Juli',\n        'August',\n        'September',\n        'Oktober',\n        'November',\n        'Dezember',\n    ];\n    var dayNames = [\n        'Sonntag',\n        'Montag',\n        'Dienstag',\n        'Mittwoch',\n        'Donnerstag',\n        'Freitag',\n        'Samstag',\n    ];\n\n\n    var dateD = date.getDate();\n    var dayIndex = date.getDay();\n    var monthIndex = date.getMonth();\n    var year = date.getFullYear();\n\n    return dayNames[dayIndex] + ', ' + dateD + '. ' + monthNames[monthIndex] + ' ' + year;\n}\n\nexport function formatTime(d) {\n\n    let date = new Date(d);\n    let stringTime = date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'}).replace(/(:\\d{2}| [AP]M)$/, \"\");\n    return stringTime;\n}\n\n/*\n * 1. conversion from java to javascript date format\n * 2. umrechnen in lokale Zeitzone!\n * */\nexport function convertFromBackendTime(backendDate) {\n\n    var appDate = new Date(backendDate * 1000);\n    //convert UTC to local time : https://stackoverflow.com/questions/6525538/convert-utc-date-time-to-local-date-time-using-javascript\n    let localDate = new Date(appDate.getTime() + appDate.getTimezoneOffset() * 60 * 1000)\n\n    return localDate;\n}\n\nexport function convertFromBackendTimeWithoutTimezone(backendDate) {\n    return new Date(backendDate * 1000);\n}\n\n/*\n Constructor für TimeObject. Sicherstellen der Datenstruktur\n */\nfunction makeTimeObject(openTime, closeTime) {\n    var timeObject = {\n        openTime: openTime,\n        closeTime: closeTime\n    }\n    return timeObject\n}\n\n/*\n Umwandlung in Minuten um vergleichen zu können\n */\nfunction makeComparableTimeObject(hours, minutes) {\n\n    return hours * 60 + minutes\n}\n\n/*\n Funktion setzt zeitdaten vom server in anderes Datenformat zusammen.\n Mehrere Zeitblöcke aus einnem Tag werden zu einem zusammengefasst.\n Dabei wird die frühste Startzeit und die späteste Endzeit genommen.\n */\nexport function getFormatedKioskTimes(kioskTimes) {\n    //zugriff auf öffnungszeiten an einem Tag per Tagesnamen formattedKioskTimes[<TagesName>]\n    let formattedKioskTimes = {\n        SUNDAY: [],\n        MONDAY: [],\n        TUESDAY: [],\n        WEDNESDAY: [],\n        THURSDAY: [],\n        FRIDAY: [],\n        SATURDAY: []\n    }\n    if (kioskTimes == null || kioskTimes.length == 0) {\n        return null\n    }\n    else {\n        kioskTimes.forEach(function (element) {\n            formattedKioskTimes[element.day].push(makeTimeObject(element.openTime, element.closeTime))\n            formattedKioskTimes[element.day].sort((a, b)=> {\n                if (a.openTime[0] < b.openTime[0]) {\n                    return -1;\n                }\n                if (a.openTime[0] > b.openTime[0]) {\n                    return 1;\n                }\n                return 0;\n            })\n        })\n\n        return formattedKioskTimes\n    }\n}\n\nexport var daysEnum = {\n    0: \"SUNDAY\",\n    1: \"MONDAY\",\n    2: \"TUESDAY\",\n    3: \"WEDNESDAY\",\n    4: \"THURSDAY\",\n    5: \"FRIDAY\",\n    6: \"SATURDAY\"\n}\n\nexport var dayReverseEnum = {\n    \"SUNDAY\": 0,\n    \"MONDAY\": 1,\n    \"TUESDAY\": 2,\n    \"WEDNESDAY\": 3,\n    \"THURSDAY\": 4,\n    \"FRIDAY\": 5,\n    \"SATURDAY\": 6\n}\n/*\n returns true wenn offen, false wenn zu, null wenn keine Daten vorliegen\n */\nexport function isKioskOpenNow(kioskTimes) {\n    let formattedKioskTimes = getFormatedKioskTimes(kioskTimes)\n    if (formattedKioskTimes == null) {\n        return null\n    }\n\n    prepareKioskTimes(formattedKioskTimes)\n\n    let date = new Date()\n    let dayTodayIndex = date.getDay();\n    let dayToday = daysEnum[dayTodayIndex]\n\n    let nowComparableTime = makeComparableTimeObject(date.getHours(), date.getMinutes())\n\n    let todaysOpenTimes = [];\n    todaysOpenTimes = formattedKioskTimes[dayToday];\n\n    //kiosk by default geschlossen, wenn ein \"ÖffnungsTimeSlice\" matched, wird er \"geöffnet\"\n    let open = \"CLOSED\"\n    todaysOpenTimes.forEach(function (element) {\n        let kioskOpenComparableTime = makeComparableTimeObject(element.openTime[0], element.openTime[1])\n        let kioskCloseComparableTime = makeComparableTimeObject(element.closeTime[0], element.closeTime[1])\n\n        //wenn öffnungszeit mehr als schließzeit, dann ist es über 0:00 hinaus, dann +1 Tag das der Vergleich funktioniert\n        if (kioskOpenComparableTime > kioskCloseComparableTime) {\n            kioskCloseComparableTime = kioskCloseComparableTime + 24 * 60\n        }\n\n        if (nowComparableTime >= kioskOpenComparableTime && nowComparableTime < kioskCloseComparableTime) {\n            open = \"OPEN\"\n            if (kioskCloseComparableTime - nowComparableTime < 30 && !iskiosk24h(formattedKioskTimes)) {\n                open = \"CLOSINGSOON\"\n            }\n        }\n\n        if(element.openTime[0] == 0 && element.openTime[1] == 0 && element.closeTime[0] == 0 && element.closeTime[1] == 0){\n            open = \"OPEN\"\n        }\n    })\n\n    return open\n}\n\n/**\n * Bei Kiosken die an 2 aufeinanderfolgenden Tagen von 00: 00  - 23:59  geöffnet haben sollte\n * nicht schließt bald angezeigt werden.\n * */\nfunction iskiosk24h(formattedKioskTimes){\n    let date = new Date()\n    let dayTodayIndex = date.getDay();\n    let dayToday = daysEnum[dayTodayIndex]\n\n    var returnValue = false\n\n    let todaysOpenTimes = formattedKioskTimes[dayToday];\n    todaysOpenTimes.forEach(function (element){\n        if(element.closeTime[0] == 23 && element.closeTime[1] == 59){\n            let dayTomorrow = daysEnum[(dayTodayIndex + 1) % 7]\n            let tomorrowOpenTimes = formattedKioskTimes[dayTomorrow]\n            tomorrowOpenTimes.forEach(function (subElement){\n                if(subElement.openTime[0] == 0 && subElement.openTime[1] == 0){\n                    returnValue = true\n                }\n            })\n        }\n    })\n    return returnValue\n}\n\n/*\n * Macht Öffnungszeit Samstag: 10:00am - 2:00am zu Samstag 10:00 - 00:00 && Sonntag 00:00 - 2:00am\n * */\nfunction prepareKioskTimes(formattedKioskTimes) {\n\n    for (let day in formattedKioskTimes) {\n        formattedKioskTimes[day].forEach(function (timeslice){\n            let kioskOpenComparableTime = makeComparableTimeObject(timeslice.openTime[0], timeslice.openTime[1])\n            let kioskCloseComparableTime = makeComparableTimeObject(timeslice.closeTime[0], timeslice.closeTime[1])\n            if (kioskOpenComparableTime > kioskCloseComparableTime && kioskCloseComparableTime != 0) {\n                let dayToPushTimeslice = daysEnum[(dayReverseEnum[day] + 1) % 7]\n                formattedKioskTimes[dayToPushTimeslice].push({openTime:[0,0], closeTime: timeslice.closeTime})\n            }\n        })\n    }\n}\n\n/*\n * returns Array von \"TimeObjekten\"\n * */\nexport function getOpenTimesToday(kioskTimes) {\n    var formattedKioskTimes = getFormatedKioskTimes(kioskTimes)\n    if (formattedKioskTimes == null) {\n        //null -> keine öffnungszeiten vorhanden.\n        return null\n    }\n    var date = new Date()\n    var dayTodayIndex = date.getDay();\n    var dayToday = daysEnum[dayTodayIndex]\n\n    return formattedKioskTimes[dayToday]\n}\n\nexport function formatNumberLength(num, length) {\n    var r = \"\" + num;\n    while (r.length < length) {\n        r = \"0\" + r;\n    }\n    return r;\n}\n\n","export const PRIMARY_COLOR = \"#e0ab16\"\nexport const STANDARD_FONT_SIZE = 16\n\nexport const styles = {\n    kioskDetailView: {\n        kioskTimes: {\n            viewWeekDay: {\n                flex: 0,\n                flexDirection: \"row\"\n            },\n            textWeekDay:{\n                fontSize: STANDARD_FONT_SIZE,\n                marginRight: 5,\n                minWidth: 80,\n            },\n        },\n        sectionHeader: {\n            paddingTop: 10,\n            paddingBottom: 10,\n            fontSize: STANDARD_FONT_SIZE,\n            fontWeight: 'bold'\n        },\n        sectionText: {\n            paddingBottom: 10,\n            fontSize: STANDARD_FONT_SIZE,\n            color: 'grey'\n        },\n        noToilet:{\n            paddingBottom: 10,\n            color: 'red',\n        },\n        toilet: {\n            paddingBottom: 10,\n            color: 'green',\n        }\n    }\n}","import React from \"react\"\nimport { MapContainer, TileLayer, Marker } from \"react-leaflet\"\nimport * as dateAndTimeFunctions from '../../helper/date_time'\nimport { styles } from '../../styles'\n\n const showOpenTimesWeek = function(kioskTimes) {\n    let times;\n    times = dateAndTimeFunctions.getFormatedKioskTimes(kioskTimes);\n    if (kioskTimes == null || kioskTimes.length == 0) {\n        return;\n    }\n\n    return (\n        <div>\n            <table>\n                <tr>\n                    <td>Montag</td>\n                    <td>{formatFromUntil(times.MONDAY)}</td>\n                </tr>\n                <tr>\n                    <td>Dienstag</td>\n                    <td>{formatFromUntil(times.TUESDAY)}</td>\n                </tr>\n                <tr>\n                    <td>Mittwoch</td>\n                    <td>{formatFromUntil(times.WEDNESDAY)}</td>\n                </tr>\n                <tr>\n                    <td>Donnerstag</td>\n                    <td>{formatFromUntil(times.THURSDAY)}</td>\n                </tr>\n                <tr>\n                    <td>Freitag</td>\n                    <td>{formatFromUntil(times.FRIDAY)}</td>\n                </tr>\n                <tr>\n                    <td>Samstag</td>\n                    <td>{formatFromUntil(times.SATURDAY)}</td>\n                </tr>\n                <tr>\n                    <td>Sonntag</td>\n                    <td>{formatFromUntil(times.SUNDAY)}</td>\n                </tr>\n            </table>\n        </div>\n    )\n}\n\nconst formatFromUntil = function(times, type) {\n    let textOpenTimes = []\n\n    if (times == null || times.length == 0) {\n        textOpenTimes.push(<span key={0}>{'geschlossen'}</span>)\n    } else {\n        for (let i = 0; i < times.length; i++) {\n            textOpenTimes.push(<span\n                key={i}>{dateAndTimeFunctions.formatNumberLength(times[i].openTime[0], 2) + \":\" + dateAndTimeFunctions.formatNumberLength(times[i].openTime[1], 2) + \" - \" + dateAndTimeFunctions.formatNumberLength(times[i].closeTime[0], 2) + \":\" + dateAndTimeFunctions.formatNumberLength(times[i].closeTime[1], 2)}</span>)\n        }\n    }\n\n    return textOpenTimes\n}\n\nconst KioskTimes = function({kioskTimes}){\n    return showOpenTimesWeek(kioskTimes)\n}\n\nexport default KioskTimes","import * as React from 'react'\nimport Layout from '../components/layout'\nimport kioskData from \"../data/kiosk_data.json\"\nimport KioskHeaderMap from '../components/kiosk_detail_view/kiosk_map_header'\nimport KioskTimes from '../components/kiosk_detail_view/kiosk_times'\nimport { styles } from '../styles'\n\nconst KioskDetailView = ({location}) => {\n    const params = new URLSearchParams(location.search);\n    var kioskId = params.get('kiosk_id')\n    const kiosk = kioskData.find(item => item.kioskId === kioskId);\n    console.log(kiosk)\n\n  if (kiosk){\n    return (\n      <Layout pageTitle={kiosk.name}>\n          <KioskHeaderMap lat={kiosk.address.geolat} long={kiosk.address.geolng}/>\n          <div style={styles.kioskDetailView.sectionHeader}>Beschreibung</div>\n          <div style={styles.kioskDetailView.sectionText}>{kiosk.description}</div>\n          {kiosk.kioskTags.find(item => item.tag === 'WC') ?\n              <div style={styles.kioskDetailView.toilet}>Mit WC</div> :\n              <div style={styles.kioskDetailView.noToilet}>Ohne WC</div>}\n          <div style={styles.kioskDetailView.sectionHeader}>Öffnungszeiten</div>\n          {kiosk.kioskTimes.length === 0 ?\n              <div style={styles.kioskDetailView.sectionText}>Keine Öffnungszeiten vorhanden</div> :\n              <KioskTimes kioskTimes={kiosk.kioskTimes}/>\n          }\n          <div style={styles.kioskDetailView.sectionHeader}>Adresse</div>\n\n          <div style={styles.kioskDetailView.sectionText}>{kiosk.address.street} {kiosk.address.number}, {kiosk.address.city}</div>\n\n\n      </Layout>\n    )\n  }\n}\n\nexport const Head = () => <title>Kiosk Details</title>\n\nexport default KioskDetailView"],"names":["_ref","lat","long","React","MapContainer","style","height","center","zoom","scrollWheelZoom","TileLayer","attribution","url","Marker","position","getFormatedKioskTimes","kioskTimes","formattedKioskTimes","SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","length","forEach","element","openTime","closeTime","day","push","sort","a","b","Date","prototype","addHours","h","this","setTime","getTime","formatNumberLength","num","r","styles","kioskDetailView","viewWeekDay","flex","flexDirection","textWeekDay","fontSize","marginRight","minWidth","sectionHeader","paddingTop","paddingBottom","fontWeight","sectionText","color","noToilet","toilet","formatFromUntil","times","type","textOpenTimes","key","i","dateAndTimeFunctions","showOpenTimesWeek","Head","location","kioskId","URLSearchParams","search","get","kiosk","kioskData","item","console","log","Layout","pageTitle","name","KioskHeaderMap","address","geolat","geolng","description","kioskTags","find","tag","KioskTimes","street","number","city"],"sourceRoot":""}